!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=r(1),o=r(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",n)},function(e,t){"use strict";var r=function(e){return{restrict:"A",link:function(t,r,n){function o(e){try{return JSON.parse(e)}catch(t){return}}var i=t.$eval(n.dragular)||o(n.dragular)||{};n.dragularModel&&(i.containersModel=n.dragularModel,i.scope||(i.scope=t)),n.dragularNameSpace&&(i.nameSpace=n.dragularNameSpace.split(" ")),n.dragularOnInit&&(i.onInit=t.$eval(n.dragularOnInit)),e(r[0],i)}}};r.$inject=["dragularService"],e.exports=r},function(e,t){"use strict";var r={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},n=function(e,t){function n(n,d){function x(){1!==arguments.length||T(n)||angular.isElement(n)||n[0]||"string"==typeof n?"string"==typeof n&&(ge=document.querySelectorAll(n)):(fe=n||{},ge=[]),me=fe.copyOptions?angular.copy(fe):fe}function b(){var e=angular.extend({},xe,me);angular.extend(me,e),me.classes&&(e=angular.extend({},ve,me.classes),angular.extend(me.classes,e)),me.eventNames&&(e=angular.extend({},he,me.eventNames),angular.extend(me.eventNames,e))}function N(){h(me.boundingBox)||(me.boundingBox=!1),me.containers&&(ge=me.containers),me.containers=o(ge,!1,me.scope),me.containersModel=o(me.containersModel,!0,me.scope),T(me.containersFilteredModel)?me.containersFilteredModel=T(me.containersFilteredModel[0])?me.containersFilteredModel:[me.containersFilteredModel]:me.containersFilteredModel=[],me.nameSpace||(me.nameSpace=["dragularCommon"]),T(me.nameSpace)||(me.nameSpace=[me.nameSpace]),me.nameSpace.forEach(function(e){r.containers[e]||(r.containers[e]=[],r.containersCtx[e]=[]);for(var t,n=_(me).length,o=0;o<n;o++){if(t=_(me)[o],!t)throw new Error("Container element must be defined!");if(r.containers[e].indexOf(t)!==-1)throw new Error("Cannot register container element more than once! Container element: ");r.containers[e].push(t),r.containersCtx[e].push({o:me,m:ee(me)[o],fm:me.containersFilteredModel[o]})}})}function $(e){var t=e?"off":"on";i(w,t,"mouseup",ne),_(me).forEach(function(e){i(e,"on","mousedown",A)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var t=me.eventNames[e];r.dragOverEvents[t]||(O.createEvent?(r.dragOverEvents[t]=O.createEvent("HTMLEvents"),r.dragOverEvents[t].initEvent(t,!0,!0)):(r.dragOverEvents[t]=O.createEventObject(),r.dragOverEvents[t].eventType=t))})}function A(e){if(1===u(e)&&!e.metaKey&&!e.ctrlKey){r.moveX=e.clientX,r.moveY=e.clientY;var t=j(e.target);t&&t.item&&(r.grabbed=t,D(),"mousedown"===e.type&&(S(e.target)?e.target.focus():e.preventDefault()))}}function D(e){var t=e?"off":"on";i(w,t,"mousemove",F)}function F(e){if(r.grabbed&&!ye.dragging){if(e.originalEvent&&(e=e.originalEvent),0===u(e))return void ne({});if(!e.clientX||e.clientX!==r.moveX||!e.clientY||e.clientY!==r.moveY){if(pe(me.ignoreInputTextSelection)){var t=C("clientX",e),n=C("clientY",e),o=O.elementFromPoint(t,n);if(S(o))return}var i=r.grabbed;if(D("remove"),H(),R(),L(i),r.item){if(!me.direction&&E(r.sourceItem)){var a=r.sourceItem.parentNode,l=a.offsetHeight,c=a.offsetWidth,s=r.sourceItem.clientHeight,d=r.sourceItem.clientWidth;me.direction=l/s<c/d?"horizontal":"vertical"}var g=m(r.sourceItem);r.offsetX=C("pageX",e)-g.left,r.offsetY=C("pageY",e)-g.top,r.clientX=C("clientX",e),r.clientY=C("clientY",e),me.boundingBox&&(r.offsetXr=C("pageX",e)-g.right,r.offsetYb=C("pageY",e)-g.bottom),e.preventDefault(),k(),y(r.item,me.classes.transit),r.mirror.style.left=r.clientX-r.offsetX+"px",r.mirror.style.top=r.clientY-r.offsetY+"px",z(e)}}}}function H(e){var t=e?"off":"on";i(w,t,"selectstart",s),i(w,t,"click",s),i(w,t,"touchmove",s)}function j(e){if(!ye.dragging||!r.mirror){for(var t=e;E(e)&&!Z(E(e));){if(me.invalid(e,t))return;if(e=E(e),!e)return}var n=E(e);if(n&&!me.invalid(e,t)&&me.moves(e,n,t,v(e)))return{item:e,source:n}}}function L(e){r.sourceItem=r.item=e.item,r.source=e.source,r.initialSibling=r.currentSibling=v(e.item),pe(me.copy,[e.item,e.source])?(r.item=e.item.cloneNode(!0),r.copy=!0,me.scope&&me.scope.$emit(me.eventNames.dragularcloned,r.item,e.item)):r.copy=!1;var t=_(me).indexOf(e.source);return r.sourceModel=ee(me)[t],r.sourceFilteredModel=me.containersFilteredModel[t],r.initialIndex=I(e.item,e.source),ye.dragging=!0,me.scope&&me.scope.$emit(me.eventNames.dragulardrag,r.sourceItem,r.source),!0}function P(e){var t=j(e);t&&(r.grabbed=t,D())}function k(){if(!r.mirror){var e=r.sourceItem.getBoundingClientRect();r.mirror=r.sourceItem.cloneNode(!0),r.mirrorWidth=e.width,r.mirrorHeight=e.height,r.mirror.style.width=g(e)+"px",r.mirror.style.height=f(e)+"px",y(r.mirror,me.classes.mirror),me.mirrorContainer.appendChild(r.mirror),i(w,"on","mousemove",z),y(O.body,me.classes.unselectable),i(r.mirror,"on","wheel",ue),me.scope&&me.scope.$emit(me.eventNames.dragularcloned,r.mirror,r.sourceItem)}}function R(){ye.dragging&&r.item&&oe(r.item,E(r.item))}function W(){r.grabbed=!1,D("remove"),H("remove")}function z(e){function t(t){function n(n){n.$emit(me.eventNames["dragular"+t],r.item,r.lastDropTarget,r.source,e)}me.scope&&n(me.scope),r.targetCtx&&r.targetCtx.o.scope&&r.targetCtx.o.scope!==me.scope&&n(r.targetCtx.o.scope),pe(me.removeOnSpill)===!0&&("over"===t?U():q())}if(r.mirror){e.originalEvent&&(e=e.originalEvent),r.clientX=C("clientX",e),r.clientY=C("clientY",e);var n,o,i,a=r.clientX-r.offsetX,l=r.clientY-r.offsetY;me.boundingBox&&(n=C("pageX",e),o=C("pageY",e),i=m(me.boundingBox)),me.lockY||(!me.boundingBox||n>i.left+r.offsetX&&n<i.right+r.offsetXr?r.mirror.style.left=a+"px":me.boundingBox&&(n<i.left+r.offsetX?r.mirror.style.left=r.clientX-(n-i.left)+"px":r.mirror.style.left=r.clientX-r.mirrorWidth-(n-i.right)+"px")),me.lockX||(!me.boundingBox||o>i.top+r.offsetY&&o<i.bottom+r.offsetYb?r.mirror.style.top=l+"px":me.boundingBox&&(o<i.top+r.offsetY?r.mirror.style.top=r.clientY-(o-i.top)+"px":r.mirror.style.top=r.clientY-r.mirrorHeight-(o-i.bottom)+"px"));var c=V(r.mirror,r.clientX,r.clientY),u=K(c,r.clientX,r.clientY),s=u!==r.lastDropTarget;if(c!==r.lastElementBehindCursor&&(X(c,r.dragOverEvents.dragularenter,!!u),r.lastElementBehindCursor&&X(r.lastElementBehindCursor,r.dragOverEvents.dragularleave,c),r.lastElementBehindCursor=c),s&&(r.lastDropTarget&&t("out"),r.lastDropTarget=u,t("over")),u===r.source&&r.copy&&!pe(me.copySortSource))return void(E(r.item)&&r.item.parentNode.removeChild(r.item));var d,g=G(u,c);if(null!==g)d=Q(u,g,r.clientX,r.clientY);else{if(pe(me.revertOnSpill)!==!0||r.copy)return void(r.copy&&E(r.item)&&r.item.parentNode.removeChild(r.item));d=r.initialSibling,u=r.source}(null===d||d!==r.item&&d!==v(r.item)&&d!==r.currentSibling)&&(r.currentSibling=d,u.insertBefore(r.item,d),me.scope&&me.scope.$emit(me.eventNames.dragularshadow,r.item,u,e))}}function K(e,t,n){function o(){if(!Z(a))return!1;for(var o,c=G(a,e),u=Q(a,c,t,n),s=J(a,u),d=me.nameSpace.length;d--;)if(o=me.nameSpace[d],r.containers[o].indexOf(a)!==-1){l=i(o);break}return r.target=a,!!s||(l||(l=i("dragularCommon")),l&&B(l.o.containersModel)&&(l.m=ee(l.o)[_(l.o).indexOf(a)]),!(l&&l.o.accepts&&!l.o.accepts(r.item,a,r.source,u,r.sourceModel,r.initialIndex))&&(!(me.isContainer&&me.isContainerAccepts&&!me.isContainerAccepts(r.item,a,r.source,u,r.sourceModel,r.initialIndex))&&(!me.canBeAccepted||me.canBeAccepted(r.item,a,r.source,u,r.sourceModel,r.initialIndex))))}function i(e){return r.containersCtx[e]&&r.containersCtx[e][r.containers[e].indexOf(a)]}for(var a=e,l=null;a&&!o();)a=E(a);return a&&l&&(r.targetCtx=l),a}function U(){M(r.item,me.classes.hide)}function q(){ye.dragging&&y(r.item,me.classes.hide)}function J(e,t){var n=void 0!==t?t:r.mirror?r.currentSibling:v(r.item);return e===r.source&&n===r.initialSibling}function G(e,t){for(var r=t;r!==e&&E(r)!==e;)r=E(r);return r===w?null:r}function Q(e,t,r,n){function o(){var t,o,i,a=e.children.length;for(t=0;t<a;t++){if(o=e.children[t],i=o.getBoundingClientRect(),l&&i.left>r)return o;if(!c&&!l&&i.top>n)return o;if(c&&i.left+i.width>r&&i.top+i.height>n)return o}return null}function i(){var e=t.getBoundingClientRect();if(c){var o=n-e.top,i=r-e.left,u=e.bottom-n,s=e.right-r,d=Math.min(i,s,o,u);return a(i===d||o===d)}return a(l?r>e.left+g(e)/2:n>e.top+f(e)/2)}function a(e){return e?v(t):t}var l="horizontal"===me.direction,c="mixed"===me.direction;return t!==e?i():o()}function V(e,t,r){var n,o=e||{},i=o.className;return o.className+=" "+me.classes.hide,n=O.elementFromPoint(t,r),o.className=i,n}function Z(e){if(!e)return!1;for(var t=me.nameSpace.length;t--;)if(r.containers[me.nameSpace[t]].indexOf(e)!==-1)return!0;return me.isContainer(e)?(r.tempModel=me.isContainerModel(e),!0):(r.tempModel=null,!1)}function _(e){return te("containers",e)}function ee(e){return te("containersModel",e,!0)}function te(e,t,n){return B(t[e])?o(t[e](t===me?ye:null,r),n,t.scope):t[e]}function re(e){if(ye.dragging){var t=arguments.length>0?e:pe(me.revertOnSpill),n=E(r.item),o=J(n);o||r.copy||!t||r.source.insertBefore(r.item,r.initialSibling),!r.sourceModel||r.copy||t?me.scope&&(o||t)&&me.scope.$emit(me.eventNames.dragularcancel,r.item,r.source,r.sourceModel,r.initialIndex):oe(r.item,n),(!r.sourceModel||r.copy||t||o)&&ae()}}function ne(e){if(W(),ye.dragging){e.originalEvent&&(e=e.originalEvent),r.clientX=C("clientX",e),r.clientY=C("clientY",e);var t=V(r.mirror,r.clientX,r.clientY),n=K(t,r.clientX,r.clientY);n&&(r.copy&&pe(me.copySortSource)||!r.copy||n!==r.source)?oe(r.item,n):pe(me.removeOnSpill)?ie():re(),r.target=null,r.lastElementBehindCursor&&X(r.lastElementBehindCursor,r.dragOverEvents.dragularrelease,t),me.scope&&me.scope.$emit(me.eventNames.dragularrelease,r.item,r.source,e)}}function oe(n,o){function a(){function e(e){J(o)?e.$emit(me.eventNames.dragularcancel,n,r.source,r.sourceModel,r.initialIndex):e.$emit(me.eventNames.dragulardrop,n,o,r.source,r.sourceModel,r.initialIndex,r.targetModel,u)}if(_(me).forEach(function(e){i(e,"off","mousedown",A),i(e,"on","mousedown",A)}),me.compileItemOnDrop){var a=angular.element(o).scope?angular.element(o).scope():me.scope;a&&a.$applyAsync(function(){var e=t(r.copy?l.cloneNode(!0):l)(a);n.parentNode===o&&o.removeChild(n),o.insertBefore(e[0],c),ae()})}me.scope&&e(me.scope),r.targetCtx&&r.targetCtx.o.scope&&r.targetCtx.o.scope!==me.scope&&e(r.targetCtx.o.scope),me.compileItemOnDrop||ae()}if(!n)return void ae();var l=r.sourceItem,c=r.currentSibling,u=I(n,o);r.copy&&o===r.source&&E(n)&&pe(me.copySortSource)&&n.parentNode.removeChild(r.sourceItem),r.sourceModel&&!J(o)?(r.targetCtx&&r.targetCtx.fm&&(u=r.targetCtx.m.indexOf(r.targetCtx.fm[u])),r.sourceFilteredModel&&(r.initialIndex=r.sourceModel.indexOf(r.sourceFilteredModel[r.initialIndex])),e.$applyAsync(function(){r.sourceModel&&(o===r.source?r.sourceModel.splice(u,0,r.sourceModel.splice(r.initialIndex,1)[0]):(r.dropElmModel=r.copy&&!me.dontCopyModel?angular.copy(r.sourceModel[r.initialIndex]):r.sourceModel[r.initialIndex],r.tempModel?r.targetModel=r.tempModel:r.targetModel=r.targetCtx&&r.targetCtx.m||r.sourceModel,n.parentNode.removeChild(n),r.copy||r.sourceModel.splice(r.initialIndex,1),r.targetModel&&r.targetModel.splice(u,0,r.dropElmModel)),E(n)&&n.parentNode.removeChild(n),a())})):a()}function ie(){if(ye.dragging){var t=E(r.item);t&&t.removeChild(r.item),r.sourceModel&&e.$applyAsync(function(){r.sourceModel.splice(r.initialIndex,1),ae()}),me.scope&&me.scope.$emit(r.copy?me.eventNames.dragularcancel:me.eventNames.dragularremove,r.item,t,r.sourceModel,r.initialIndex),r.sourceModel||ae()}}function ae(){W(),se(),r.item&&M(r.item,me.classes.transit),ye.dragging=!1,pe(me.removeOnSpill)===!0&&q(),me.scope&&(r.lastDropTarget&&me.scope.$emit(me.eventNames.dragularout,r.item,r.lastDropTarget,r.source),me.scope.$emit(me.eventNames.dragulardragend,r.item)),r.source=r.item=r.sourceItem=r.initialSibling=r.currentSibling=r.sourceModel=null,r.initialIndex=r.currentIndex=r.lastDropTarget=r.tempModel=r.targetModel=null,r.dropElmModel=r.targetCtx=r.copy=r.moveX=r.moveY=null}function le(){$(!0),ce(me.containers),ne({})}function ce(t){e.$applyAsync(function(){var e=T(t)?t:c(t);e.forEach(function(e){angular.forEach(me.nameSpace,function(t){var n;n=r.containers[t].indexOf(e),r.containers[t].splice(n,1),r.containersCtx[t].splice(n,1)})})})}function ue(e){if(r.target){e.originalEvent&&(e=e.originalEvent);var t=r.target.scrollTop;r.target.scrollTop+=e.deltaY,t!==r.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function se(){r.mirror&&(M(O.body,me.classes.unselectable),i(w,"off","mousemove",z),i(r.mirror,"off","wheel",ue),E(r.mirror)&&r.mirror.parentNode.removeChild(r.mirror),r.mirror=null)}function de(e){o(e,!0,me.scope)}var me,ge=n||[],fe=d||{},pe=Y,ve={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},he={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},xe={copyOptions:!1,classes:ve,eventNames:he,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:a,isContainerModel:p,isContainerAccepts:l,moves:l,accepts:l,canBeAccepted:l,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:a,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:O.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},ye={containers:r.containers,containersCtx:r.containersCtx,sanitizeContainersModel:de,sanitizeContainers:o,isContainer:Z,start:P,end:R,cancel:re,remove:ie,destroy:le,dragging:!1};return x(),b(),N(),$(),me.onInit&&me.onInit(ye,me),ye}function o(e,t,r){if(B(e))return e;if(T(e))return t?T(e[0])?e:[e]:e;if("string"==typeof e&&r){var n=r.$eval(e);return B(n)?n:function(){return r.$eval(e)}}return e?c(e):[]}function i(e,t,r,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);if(e.addEventListener){var c={on:"addEventListener",off:"removeEventListener"};e[c[t]](r,n,{passive:!1}),e[c[t]](o[r],n,{passive:!1})}else"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[r]?l[t](i[r],n):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[r]?l[t](a[r],n):o[r]&&l[t](o[r],n),l[t](r,n)}function a(){return!1}function l(){return!0}function c(e,t){return T(e)?e:e.length?Array.prototype.slice.call(e,t):[e]}function u(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function s(e){e.originalEvent&&(e=e.originalEvent),r.grabbed&&e.preventDefault()}function d(e,t){return"undefined"!=typeof window[t]?window[t]:w.clientHeight?w[e]:O.body[e]}function m(e){var t=e.getBoundingClientRect(),r=d("scrollTop","pageYOffset"),n=d("scrollLeft","pageXOffset");return{left:t.left+n,right:t.right+n,top:t.top+r,bottom:t.bottom+r}}function g(e){return e.width||e.right-e.left}function f(e){return e.height||e.bottom-e.top}function p(){return[]}function v(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}if(e)return e.nextElementSibling||t()}function h(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function x(e){var t=r.classesCache[e];return t?t.lastIndex=0:r.classesCache[e]=t=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),t}function y(e,t){var r=e.className;r.length?x(t).test(r)||(e.className+=" "+t):e.className=t}function M(e,t){e.className=e.className.replace(x(t)," ").trim()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function C(e,t){var r=b(t),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in r)&&n[e]in r&&(e=n[e]),!r.type||r.type.indexOf("touch")<0?r[e]:r.type.indexOf("end")===-1&&r.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function S(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||N(e)}function N(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||N(E(e))))}function I(e,t){return Array.prototype.indexOf.call(angular.element(t).children(),e)}function X(e,t,n){e&&(r.extra=n,e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t))}function Y(e,t,n){return B(e)?!!e.apply(n||this,t||r):!!e}var O=document,w=O.documentElement,T=Array.isArray,B=angular.isFunction;return n.cleanEnviroment=function(){r.classesCache={},r.containersCtx={},r.containers={},r.mirror=void 0},n.shared=r,n};n.$inject=["$rootScope","$compile"],e.exports=n}])});
//# sourceMappingURL=dragular.min.js.map
